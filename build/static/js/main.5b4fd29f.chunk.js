(this.webpackJsonptravels=this.webpackJsonptravels||[]).push([[0],{102:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(18),s=r.n(o),c=(r(62),r(8)),i=r(1),l=Object(a.createContext)(),j=function(e){var t=Object(a.useState)(JSON.parse(localStorage.getItem("usuario"))),r=Object(c.a)(t,2),n=r[0],o=r[1];return Object(i.jsx)(l.Provider,{value:{usuario:n,setUsuario:o},children:e.children})},d=r(104),u=r(26),b=r(7),O=r(108),h=r(109),m=r(105),x=r(35),p=function(){var e=Object(a.useContext)(l),t=(e.usuario,e.setUsuario);return Object(i.jsx)(O.a,{bg:"dark",expand:"lg",variant:"dark",children:Object(i.jsxs)(d.a,{children:[Object(i.jsx)(x.LinkContainer,{to:"/",children:Object(i.jsxs)(O.a.Brand,{children:[" ",Object(i.jsx)("img",{src:"/onepiece.png",width:"100"})]})}),Object(i.jsx)(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(i.jsxs)(O.a.Collapse,{id:"basic-navbar-nav",children:[Object(i.jsxs)(h.a,{className:"me-auto",children:[Object(i.jsx)(x.LinkContainer,{to:"/",children:Object(i.jsx)(h.a.Link,{children:"Inicio"})}),Object(i.jsx)(x.LinkContainer,{to:"/travels",children:Object(i.jsx)(h.a.Link,{children:"Travels"})})]}),Object(i.jsx)(m.a,{onClick:function(){t(null),localStorage.clear()},variant:"danger",children:"Salir"})]})]})})},g=r(106),f=r(107),v=r(6),C=r(2),N=r(24),S=r.n(N),L=function(e){var t=e.esLogin,r=e.ejecutaSubmit,n=(Object(b.k)(),Object(a.useContext)(l).setUsuario,{nombre:"",apellido:"",correo:"",password:"",confirmar:""}),o=Object(a.useState)(n),s=Object(c.a)(o,2),j=s[0],d=s[1],u=j.nombre,O=j.apellido,h=j.correo,m=j.password,x=j.confirmar,p=function(e){d(Object(C.a)(Object(C.a)({},j),{},Object(v.a)({},e.target.name,e.target.value)))};return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m!==x&&!t)return S.a.fire({icon:"error",title:"Oops...",text:"Las contrase\xf1as no coinciden"}),!1;r(j)},children:[!t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Nombre"}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre",name:"nombre",required:!0,minLength:"3",value:u,onChange:p})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Apellido"}),Object(i.jsx)("input",{type:"text",className:"form-control",placeholder:"Apellido",required:!0,minLength:"3",name:"apellido",value:O,onChange:p})]})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Correo"}),Object(i.jsx)("input",{type:"email",required:!0,className:"form-control",placeholder:"Correo",name:"correo",value:h,onChange:p})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Password"}),Object(i.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",required:!0,value:m,onChange:p})]}),!t&&Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Confirmar Password"}),Object(i.jsx)("input",{type:"password",className:"form-control",placeholder:"Confirmar Password",name:"confirmar",value:x,onChange:p})]}),Object(i.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:t?"Iniciar Sesi\xf3n":"Registrarse"})]})})},k=r(42),w=r.n(k),y=function(){var e=Object(a.useState)(!0),t=Object(c.a)(e,2),r=t[0],n=t[1],o=Object(b.l)(),s=Object(b.k)(),j=Object(a.useContext)(l),d=j.usuario,u=j.setUsuario;Object(a.useEffect)((function(){d&&s.push("/"),"/login"!==o.pathname&&n(!1),console.log(o.pathname)}),[]);return Object(i.jsxs)("div",{className:"mt-4",children:[r?Object(i.jsx)("h1",{children:"Login"}):Object(i.jsx)("h1",{children:"Register"}),Object(i.jsx)(g.a,{children:Object(i.jsx)(f.a,{md:6,children:Object(i.jsx)(L,{esLogin:r,ejecutaSubmit:r?function(e){console.log("LOGIN",e),w.a.post("http://localhost:8000/api/auth/login",e).then((function(e){console.log(e),S.a.fire("Exito en logear","bienvenido","success"),u({id:e.data._id,nombre:e.data.nombre}),localStorage.setItem("usuario",JSON.stringify({id:e.data._id,nombre:e.data.nombre})),s.push("/")})).catch((function(e){console.log(e),S.a.fire({icon:"error",title:"Oops...",text:"Usuario o contrase\xf1a incorrectos"})}))}:function(e){console.log("REGISTRO",e),w.a.post("http://localhost:8000/api/auth/register",e).then((function(e){console.log(e.data),S.a.fire("Registro exitoso","Ahora puedes iniciar sesi\xf3n","success"),u({id:e.data._id,nombre:e.data.nombre}),localStorage.setItem("usuario",JSON.stringify({id:e.data._id,nombre:e.data.nombre})),s.push("/")})).catch((function(e){console.log(e.response.data.message),S.a.fire("Error",e.response.data.message,"error")}))}})})}),Object(i.jsx)("div",{className:"mt-4",children:Object(i.jsx)("a",{className:"text-decoration-underline text-primary",onClick:function(){n(!r),r?(console.log("vamos al register",r),s.push("/register")):s.push("/login")},children:Object(i.jsxs)("i",{children:["Ir al ",r?"ir al Registro":"ir al Login"," "]})})})]})},I=function(){var e=Object(a.useContext)(l),t=e.usuario,r=(e.setUsuario,Object(b.k)());Object(a.useEffect)((function(){console.log("Usuario Logeado?: ",t),t||r.push("/login")}),[t,r]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:'Pantalla que debe ver el usuario SOLO cuando esta "LOGEADO"'}),Object(i.jsxs)("h1",{children:["Hola ",null===t||void 0===t?void 0:t.nombre]})]})},U=function(){var e=Object(a.useContext)(l),t=e.usuario,r=(e.setUsuario,Object(b.k)());return Object(a.useEffect)((function(){console.log("Usuario Logeado?: ",t),t||r.push("/login")}),[t,r]),Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"Bienvenido  a la patanlla de viajes CON CAMBIOS."})})},E=function(){var e=Object(a.useContext)(l),t=e.usuario;e.setUsuario;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(u.BrowserRouter,{children:[t&&Object(i.jsx)(p,{}),Object(i.jsx)(d.a,{children:Object(i.jsxs)(b.g,{children:[Object(i.jsx)(b.d,{exact:!0,path:"/login",component:y}),Object(i.jsx)(b.d,{exact:!0,path:"/travels",component:U}),Object(i.jsx)(b.d,{exact:!0,path:"/register",component:y}),Object(i.jsx)(b.d,{exact:!0,path:"/",component:I})]})})]})})},R=function(){return Object(i.jsx)(j,{children:Object(i.jsx)(E,{})})};s.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(R,{})}),document.getElementById("root"))},62:function(e,t,r){}},[[102,1,2]]]);
//# sourceMappingURL=main.5b4fd29f.chunk.js.map